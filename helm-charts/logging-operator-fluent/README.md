# Logging Operator Fluent Chart

## tl;dr:

```bash
$ helm repo add banzaicloud-stable https://kubernetes-charts.banzaicloud.com
$ helm repo update
# Prerequisites
$ helm install banzaicloud-stable/logging-operator
# Install fluent and fluent-bit cr
$ helm install banzaicloud-stable/logging-operator-fluent
```

## Introduction

This chart applies Fluentd and Fluent-bit custom resources to [Logging Operator](https://github.com/banzaicloud/banzai-charts/logging-operator) deployment on a [Kubernetes](http://kubernetes.io)

## Prerequisites

- Kubernetes 1.8+ with Beta APIs enabled
- [Logging Operator](https://github.com/banzaicloud/logging-operator) 


|                      Parameter                      |                        Description                     |             Default            |
| --------------------------------------------------- | ------------------------------------------------------ | ------------------------------ |
| `tls.enabled`                                       | Enabled TLS communication between components           | true                           |
| `tls.secretName`                                    | Specified generic secret name, which contain tls certs | This will overwrite automatic Helm certificate generation and overrides `fluentbit.tlsSecret` and `fluentd.tlsSecret`. |
| `tls.sharedKey`                                     | Shared key between nodes (fluentd-fluentbit)           | [autogenerated]                |
| `fluentbit.enabled`                                 | Install fluent-bit                                     | true                           |
| `fluentbit.namespace`                               | Specified fluentbit installation namespace             | same as operator namespace     |
| `fluentbit.image.tag`                               | Fluentbit container image tag                          | `1.1.3`                        |
| `fluentbit.image.repository`                        | Fluentbit container image repository                   | `fluent/fluent-bit`            |
| `fluentbit.image.pullPolicy`                        | Fluentbit container pull policy                        | `IfNotPresent`                 |
| `fluentbit.tolerations`                             | Fluentbit tolerations                                  | `nil`                          |
| `fluentbit.tlsSecret`                               | Secret name that contains Fluentbit TLS client cert    | Ignored if `tls.secretName` is specified. Must refer to a secret of type `kubernetes.io/tls` |
| `fluentd.enabled`                                   | Install fluentd                                        | true                           |
| `fluentd.namespace`                                 | Specified fluentd installation namespace               | same as operator namespace     |
| `fluentd.image.tag`                                 | Fluentd container image tag                            | `v1.5.0`                       |
| `fluentd.image.repository`                          | Fluentd container image repository                     | `banzaicloud/fluentd`          |
| `fluentd.image.pullPolicy`                          | Fluentd container pull policy                          | `IfNotPresent`                 |
| `fluentd.volumeModImage.tag`                        | Fluentd volumeModImage container image tag             | `latest`                       |
| `fluentd.volumeModImage.repository`                 | Fluentd volumeModImage container image repository      | `busybox`                      |
| `fluentd.volumeModImage.pullPolicy`                 | Fluentd volumeModImage container pull policy           | `IfNotPresent`                 |
| `fluentd.configReloaderImage.tag`                   | Fluentd configReloaderImage container image tag        | `v0.2.2`                       |
| `fluentd.configReloaderImage.repository`            | Fluentd configReloaderImage container image repository | `jimmidyson/configmap-reload`  |
| `fluentd.configReloaderImage.pullPolicy`            | Fluentd configReloaderImage container pull policy      | `IfNotPresent`                 |
| `fluentd.fluentdPvcSpec.accessModes`                | Fluentd persistence volume access modes                | `[ReadWriteOnce]`              |
| `fluentd.fluentdPvcSpec.resources.requests.storage` | Fluentd persistence volume size                        | `21Gi`                         |
| `fluentd.tolerations`                               | Fluentd tolerations                                    | `nil`                          |
| `fluentd.tlsSecret`                                 | Secret name that contains Fluentd TLS client cert      | Ignored if `tls.secretName` is specified. Must refer to a secret of type `kubernetes.io/tls`. |
| `psp.enabled`                                       | Install PodSecurityPolicy                              | `false`                        |
